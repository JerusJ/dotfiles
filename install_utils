#!/usr/bin/env bash

function git_clone() {
	repo=$1
	dest=$2

	if [ -z "$repo" ]; then
		echo "!!! repo cannot be empty"
		exit 1
	fi
	if [ -z "$dest" ]; then
		dest=$(echo "$repo" | rev | cut -d "/" -f 1 | rev)
	fi

	echo "--> Cloning/Updating repo: '${repo}' to destination: '${dest}'"

	if [[ -d $dest ]]; then
		echo "--> ${dest} repo already exists, skipping..."
	else
		echo "--> ${dest} repo does not exist, cloning..."
		git clone --depth=1 $1 $2
	fi
}

function install_go_packages() {
	export GO111MODULE=on

	go install github.com/cweill/gotests/...@latest
	go install github.com/fatih/gomodifytags@latest
	go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest
	go install github.com/x-motemen/gore/cmd/gore@latest
	go install github.com/rogpeppe/godef@latest
	go install github.com/stamblerre/gocode@latest
	go install golang.org/x/tools/cmd/godoc@latest
	go install golang.org/x/tools/cmd/goimports@latest
	go install golang.org/x/tools/cmd/gorename@latest
	go install golang.org/x/tools/cmd/guru@latest
	go install golang.org/x/tools/gopls@latest
}

function install_git_repos() {
	git_clone https://github.com/unixorn/fzf-zsh-plugin.git ~/fzf-zsh-plugin
	git_clone https://github.com/romkatv/powerlevel10k.git ~/powerlevel10k
	git_clone https://github.com/junegunn/fzf ~/.fzf
	git_clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
}

function install_tmux_tpm() {
	$HOME/.tmux/plugins/tpm/bin/install_plugins
}

